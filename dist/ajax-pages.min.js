function ajaxPages(e){function t(t){r.beforeLoading(),$(r.loaderSelector).fadeIn();var n=new Date;$.get(t,function(l){var c=new Date,f=c.getTime()-n.getTime(),d=r.minLoadTime;d=f>=r.minLoadTime?0:r.minLoadTime-f,setTimeout(function(){if("replace"===r.replaceMethod){var n="<div>"+l.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/gi,"")+"</div>",c=$(n);c=c.find(r.searchSelector).html(),$(r.replaceSelector).html(c)}else"append"===r.replaceMethod&&$(r.replaceSelector).append(l);if($(r.loaderSelector).fadeOut(),r.changeTitle){var f="";if(r.titleSelector==o){var d=l.indexOf(a)+a.length,p=l.indexOf(i);f=l.substring(d,p)}else f=c.find(r.titleSelector).text();document.title=f}if(r.enableUrlChange&&t!==window.location.href&&window.history.pushState({html:c,pageTitle:document.title},"",t),r.scrollTop&&$("html, body").animate({scrollTop:$(r.scrollTopSelector).offset().top},r.scrollTopDuration),focusedInput){var u=$('input[name="'+focusedInput+'"]');if(1===u.length){u[0].focus();var s=u.val();u.val("").val(s)}focusedInput=null}r.enableAnalyticsTrack&&"function"==typeof ga&&ga("send","pageview",t),r.afterLoading(),ajaxPages(e)},d)}).fail(function(){r.onError(),$(r.loaderSelector).fadeOut()})}function n(e,t){var n=new RegExp("([?&])"+e+"=.*?(&|#|$)");return t.replace(n,"$1")}var o="title",a="<title>",i="</title>",l={rootSelector:"body",replaceSelector:"#content",replaceMethod:"replace",searchSelector:"#content",loaderSelector:"#loadingContent",linkSelector:"a[data-link='ajax']",formSelector:"form[data-link='ajax']",paginationKey:"p",scrollTop:!0,scrollTopSelector:"#content",scrollTopDuration:500,enableAnalyticsTrack:!0,enableUrlChange:!0,changeTitle:!0,titleSelector:"title",minLoadTime:0,typingTimeout:500,loadOnPopState:!1,beforeLoading:function(){},afterLoading:function(){},onError:function(){}},r=jQuery.extend(l,e);return window.history.replaceState({html:$(r.searchSelector).html(),pageTitle:document.title},"",window.location.href),$(r.loaderSelector).hide(),window.onpopstate=function(n){if(n.state){if(r.loadOnPopState)return t(window.location.href),!0;if(void 0!==n.state.html)return $(r.replaceSelector).html(n.state.html),r.changeTitle&&(document.title=n.state.pageTitle),r.enableAnalyticsTrack&&"function"==typeof ga&&ga("send","pageview",window.location.href),ajaxPages(e),!0}window.location.href=window.location.href},$("html").find(r.rootSelector).each(function(e,o){var a=jQuery(o),i=a.find(r.linkSelector).get(),l=a.find(r.formSelector).get();$.each(i,function(n,o){$(o).attr("onclick","return false"),$(o).off().click(function(n){var o=$(n.target);for(e=0;e<10&&void 0===o.attr("href");e++)o=o.parent();t(o.attr("href"))})}),$.each(l,function(e,o){$(o).attr("submit","return false");var a=window.location.href,i="?";-1!==a.indexOf("?")&&(i="&"),$(o).find("input[type='text'], input[type='radio'], select").each(function(){$(this).on("input change",function(){isTyping&&clearTimeout(isTyping);var e=$(this).attr("name"),o=$(this).val(),l=0;focusedInput=e,$(this).is("input[type='text']")&&(l=r.typingTimeout),isTyping=setTimeout(function(){if(a=n(r.paginationKey,a),""===o)a=n(e,a);else if(-1!==a.indexOf(e)){var l=new RegExp("("+e+"=)[^&]+");a=a.replace(l,"$1"+o)}else a=a+i+e+"="+o;a=a.replace("&&","&"),a=a.replace("?&","?"),a=a.replace(/([?&])$/,""),t(a)},l)})})})})}var isTyping=!1,focusedInput=null;