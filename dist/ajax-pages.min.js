function ajaxPages(e){function t(t){if(t===window.location.href)return!1;r.beforeLoading(),$(r.loaderSelector).fadeIn();var n=new Date;$.get(t,function(l){var c=new Date,f=c.getTime()-n.getTime(),p=r.minLoadTime;p=f>=r.minLoadTime?0:r.minLoadTime-f,setTimeout(function(){if("replace"===r.replaceMethod){body="<div>"+l.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/gi,"")+"</div>";var n=$(body);n=n.find(r.searchSelector).html(),$(r.replaceSelector).html(n)}else"append"===r.replaceMethod&&$(r.replaceSelector).append(l);if($(r.loaderSelector).fadeOut(),r.changeTitle){var c="";if(r.titleSelector==o){var f=l.indexOf(a)+a.length,p=l.indexOf(i);c=l.substring(f,p)}else c=n.find(r.titleSelector).text();document.title=c}if(r.enableUrlChange&&window.history.pushState({html:n,pageTitle:document.title},"",t),r.scrollTop&&$("html, body").animate({scrollTop:$(r.scrollTopSelector).offset().top},r.scrollTopDuration),focusedInput){if(input=$('input[name="'+focusedInput+'"]'),1===input.length){input[0].focus();var u=input.val();input.val("").val(u)}focusedInput=null}r.enableAnalyticsTrack&&"function"==typeof ga&&ga("send","pageview",t),r.afterLoading(),ajaxPages(e)},p)}).fail(function(){r.onError(),$(r.loaderSelector).fadeOut()})}function n(e,t){var n=new RegExp("([?&])"+e+"=.*?(&|#|$)");return t.replace(n,"$1")}var o="title",a="<title>",i="</title>",l={rootSelector:"body",replaceSelector:"#content",replaceMethod:"replace",searchSelector:"#content",loaderSelector:"#loadingContent",linkSelector:"a[data-link='ajax']",formSelector:"form[data-link='ajax']",paginationKey:"p",scrollTop:!0,scrollTopSelector:"#content",scrollTopDuration:500,enableAnalyticsTrack:!0,enableUrlChange:!0,changeTitle:!0,titleSelector:"title",minLoadTime:0,typingTimeout:500,beforeLoading:function(){},afterLoading:function(){},onError:function(){}},r=jQuery.extend(l,e);return window.history.replaceState({html:$(r.searchSelector).html(),pageTitle:document.title},"",window.location.href),$(r.loaderSelector).hide(),window.onpopstate=function(t){t.state&&($(r.replaceSelector).html(t.state.html),document.title=t.state.pageTitle,r.enableAnalyticsTrack&&"function"==typeof ga&&ga("send","pageview",window.location.href),ajaxPages(e))},$("html").find(r.rootSelector).each(function(e,o){var a=jQuery(o),i=a.find(r.linkSelector).get(),l=a.find(r.formSelector).get();$.each(i,function(e,n){$(n).attr("onclick","return false"),$(n).click(function(e){t($(e.target).attr("href"))})}),$.each(l,function(e,o){$(o).attr("submit","return false");var a=window.location.href,i="?";-1!==a.indexOf("?")&&(i="&"),$(o).find("input[type='text'], select").each(function(){$(this).on("input change",function(){isTyping&&clearTimeout(isTyping);var e=$(this).attr("name"),o=$(this).val(),l=0;focusedInput=e,$(this).is("input[type='text']")&&(l=r.typingTimeout),isTyping=setTimeout(function(){if(a=n(r.paginationKey,a),""===o)a=n(e,a);else if(-1!==a.indexOf(e)){var l=new RegExp("("+e+"=)[^&]+");a=a.replace(l,"$1"+o)}else a=a+i+e+"="+o;a=a.replace("&&","&"),a=a.replace("?&","?"),a=a.replace(/([?&])$/,""),t(a)},l)})})})})}var isTyping=!1,focusedInput=null;