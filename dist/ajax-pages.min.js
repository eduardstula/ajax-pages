function ajaxPages(e){function t(t){if(t===window.location.href)return!1;r.beforeLoading(),$(r.loaderSelector).fadeIn();var n=new Date;$.get(t,function(l){var c=new Date,u=c.getTime()-n.getTime(),f=r.minLoadTime;f=u>=r.minLoadTime?0:r.minLoadTime-u,setTimeout(function(){body="<div>"+l.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/gi,"")+"</div>";var n=$(body);if(n=n.find(r.searchSelector).html(),$(r.replaceSelector).html(n),$(r.loaderSelector).fadeOut(),r.changeTitle){var c="";if(r.titleSelector==i){var u=l.indexOf(o)+o.length,f=l.indexOf(a);c=l.substring(u,f)}else c=n.find(r.titleSelector).text();document.title=c}if(r.enableUrlChange&&window.history.pushState({html:n,pageTitle:document.title},"",t),r.scrollTop&&$("html, body").animate({scrollTop:$(r.scrollTopSelector).offset().top},r.scrollTopDuration),focusedInput){if(input=$('input[name="'+focusedInput+'"]'),1===input.length){input[0].focus();var d=input.val();input.val("").val(d)}focusedInput=null}r.enableAnalyticsTrack&&"function"==typeof ga&&ga("send","pageview",t),r.afterLoading(),ajaxPages(e)},f)})}function n(e,t){var n=new RegExp("([?&])"+e+"=.*?(&|#|$)");return t.replace(n,"$1")}var i="title",o="<title>",a="</title>",l={rootSelector:"body",replaceSelector:"#content",searchSelector:"#content",loaderSelector:"#loadingContent",linkSelector:"a[data-link='ajax']",formSelector:"form[data-link='ajax']",paginationKey:"p",scrollTop:!0,scrollTopSelector:"#content",scrollTopDuration:500,enableAnalyticsTrack:!0,enableUrlChange:!0,changeTitle:!0,titleSelector:"title",minLoadTime:0,typingTimeout:500,beforeLoading:function(){},afterLoading:function(){}},r=jQuery.extend(l,e);return window.history.replaceState({html:$(r.searchSelector).html(),pageTitle:document.title},"",window.location.href),$(r.loaderSelector).hide(),window.onpopstate=function(t){t.state&&($(r.replaceSelector).html(t.state.html),document.title=t.state.pageTitle,r.enableAnalyticsTrack&&"function"==typeof ga&&ga("send","pageview",window.location.href),ajaxPages(e))},$("html").find(r.rootSelector).each(function(e,i){var o=jQuery(i),a=o.find(r.linkSelector).get(),l=o.find(r.formSelector).get();$.each(a,function(e,n){$(n).attr("onclick","return false"),$(n).click(function(e){t($(e.target).attr("href"))})}),$.each(l,function(e,i){$(i).attr("submit","return false");var o=window.location.href,a="?";-1!==o.indexOf("?")&&(a="&"),$(i).find("input[type='text'], select").each(function(){$(this).on("input change",function(){isTyping&&clearTimeout(isTyping);var e=$(this).attr("name"),i=$(this).val(),l=0;focusedInput=e,$(this).is("input[type='text']")&&(l=r.typingTimeout),isTyping=setTimeout(function(){if(o=n(r.paginationKey,o),""===i)o=n(e,o);else if(-1!==o.indexOf(e)){var l=new RegExp("("+e+"=)[^&]+");o=o.replace(l,"$1"+i)}else o=o+a+e+"="+i;o=o.replace("&&","&"),o=o.replace("?&","?"),o=o.replace(/([?&])$/,""),t(o)},l)})})})})}var isTyping=!1,focusedInput=null;